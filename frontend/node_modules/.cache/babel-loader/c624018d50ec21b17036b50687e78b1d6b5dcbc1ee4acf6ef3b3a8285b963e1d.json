{"ast":null,"code":"import _objectSpread from\"/Users/mdearaujo/Downloads/LETZ/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Container,Typography,Box,Card,CardContent,List,ListItem,ListItemIcon,ListItemText,ListItemSecondaryAction,Switch,IconButton,Divider,Button,Dialog,DialogTitle,DialogContent,DialogActions,Alert,Chip,LinearProgress,FormControl,Select,MenuItem,Avatar,Badge}from'@mui/material';import{Notifications as NotificationsIcon,DarkMode as DarkModeIcon,Language as LanguageIcon,Storage as StorageIcon,Info as InfoIcon,InstallMobile as InstallIcon,Sync as SyncIcon,Delete as DeleteIcon,CloudOff as OfflineIcon,Wifi as OnlineIcon,Update as UpdateIcon,Share as ShareIcon,LocationOn as LocationIcon,Palette as PaletteIcon}from'@mui/icons-material';import{usePWA}from'../hooks/usePWA';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SettingsPage(){const{isOnline,isInstallable,isInstalled,notificationPermission,cacheStatus,swRegistration,isSupported,installApp,requestNotificationPermission,clearCache,updateApp,shareContent}=usePWA();// Estados locais\nconst[settings,setSettings]=useState({darkMode:localStorage.getItem('letz-dark-mode')==='true',notifications:notificationPermission==='granted',locationServices:localStorage.getItem('letz-location-enabled')==='true',autoSync:localStorage.getItem('letz-auto-sync')!=='false',language:localStorage.getItem('letz-language')||'pt-BR',theme:localStorage.getItem('letz-theme')||'default'});const[clearCacheDialog,setClearCacheDialog]=useState(false);const[aboutDialog,setAboutDialog]=useState(false);const[cacheSize,setCacheSize]=useState('Calculando...');const[isUpdating,setIsUpdating]=useState(false);// Calcular tamanho do cache\nuseEffect(()=>{calculateCacheSize();},[]);const calculateCacheSize=async()=>{if('storage'in navigator&&'estimate'in navigator.storage){try{const estimate=await navigator.storage.estimate();const usedMB=((estimate.usage||0)/1024/1024).toFixed(1);setCacheSize(\"\".concat(usedMB,\" MB\"));}catch(error){setCacheSize('Não disponível');}}else{setCacheSize('Não suportado');}};const handleSettingChange=(settingId,value)=>{const newSettings=_objectSpread(_objectSpread({},settings),{},{[settingId]:value});setSettings(newSettings);// Salvar no localStorage\nswitch(settingId){case'darkMode':localStorage.setItem('letz-dark-mode',value.toString());// Aplicar tema (seria integrado com ThemeContext)\nbreak;case'locationServices':localStorage.setItem('letz-location-enabled',value.toString());break;case'autoSync':localStorage.setItem('letz-auto-sync',value.toString());break;case'language':localStorage.setItem('letz-language',value.toString());break;case'theme':localStorage.setItem('letz-theme',value.toString());break;}};const handleInstallApp=async()=>{const success=await installApp();if(success){console.log('App instalado com sucesso!');}};const handleRequestNotifications=async()=>{const granted=await requestNotificationPermission();if(granted){handleSettingChange('notifications',true);}};const handleClearCache=async()=>{await clearCache();await calculateCacheSize();setClearCacheDialog(false);};const handleUpdateApp=async()=>{setIsUpdating(true);await updateApp();setTimeout(()=>setIsUpdating(false),2000);};const handleShareApp=()=>{shareContent({title:'LETZ - Organizador de Eventos',text:'Conheça o LETZ! O melhor app para organizar eventos sociais com amigos.',url:window.location.origin});};// Configurações organizadas por seção\nconst settingsSections=[{title:'Aplicativo PWA',items:[{id:'install',label:isInstalled?'App Instalado':'Instalar App',description:isInstalled?'O LETZ está instalado em seu dispositivo':'Instale para acesso rápido e uso offline',icon:/*#__PURE__*/_jsx(InstallIcon,{}),type:'action',action:isInstalled?undefined:handleInstallApp},{id:'connection',label:isOnline?'Online':'Offline',description:isOnline?'Conectado à internet':'Funcionando no modo offline',icon:isOnline?/*#__PURE__*/_jsx(OnlineIcon,{}):/*#__PURE__*/_jsx(OfflineIcon,{}),type:'info'},{id:'sync',label:'Sincronização Automática',description:'Sincronizar dados quando voltar online',icon:/*#__PURE__*/_jsx(SyncIcon,{}),type:'switch',value:settings.autoSync},{id:'update',label:'Verificar Atualizações',description:'Buscar nova versão do app',icon:/*#__PURE__*/_jsx(UpdateIcon,{}),type:'action',action:handleUpdateApp}]},{title:'Notificações',items:[{id:'notifications',label:'Notificações Push',description:notificationPermission==='granted'?'Notificações ativadas':'Receber notificações de eventos e mensagens',icon:/*#__PURE__*/_jsx(NotificationsIcon,{}),type:notificationPermission==='granted'?'switch':'action',value:settings.notifications,action:notificationPermission!=='granted'?handleRequestNotifications:undefined}]},{title:'Personalização',items:[{id:'darkMode',label:'Modo Escuro',description:'Usar tema escuro da interface',icon:/*#__PURE__*/_jsx(DarkModeIcon,{}),type:'switch',value:settings.darkMode},{id:'theme',label:'Tema',description:'Escolher cores do aplicativo',icon:/*#__PURE__*/_jsx(PaletteIcon,{}),type:'select',value:settings.theme,options:[{value:'default',label:'Padrão'},{value:'blue',label:'Azul'},{value:'green',label:'Verde'},{value:'purple',label:'Roxo'}]},{id:'language',label:'Idioma',description:'Idioma da interface',icon:/*#__PURE__*/_jsx(LanguageIcon,{}),type:'select',value:settings.language,options:[{value:'pt-BR',label:'Português (Brasil)'},{value:'en-US',label:'English (US)'},{value:'es-ES',label:'Español'}]}]},{title:'Privacidade',items:[{id:'locationServices',label:'Serviços de Localização',description:'Permitir acesso à localização para eventos',icon:/*#__PURE__*/_jsx(LocationIcon,{}),type:'switch',value:settings.locationServices}]},{title:'Armazenamento',items:[{id:'cacheSize',label:'Cache do App',description:\"Dados armazenados: \".concat(cacheSize),icon:/*#__PURE__*/_jsx(StorageIcon,{}),type:'action',action:()=>setClearCacheDialog(true)}]},{title:'Informações',items:[{id:'share',label:'Compartilhar App',description:'Indicar o LETZ para amigos',icon:/*#__PURE__*/_jsx(ShareIcon,{}),type:'action',action:handleShareApp},{id:'about',label:'Sobre o LETZ',description:'Versão 1.0.0 - Build PWA',icon:/*#__PURE__*/_jsx(InfoIcon,{}),type:'action',action:()=>setAboutDialog(true)}]}];const renderSettingItem=item=>{var _item$options;const getStatusChip=()=>{if(item.id==='install'){return isInstalled?/*#__PURE__*/_jsx(Chip,{label:\"Instalado\",color:\"success\",size:\"small\"}):isInstallable?/*#__PURE__*/_jsx(Chip,{label:\"Dispon\\xEDvel\",color:\"primary\",size:\"small\"}):/*#__PURE__*/_jsx(Chip,{label:\"N\\xE3o suportado\",color:\"default\",size:\"small\"});}if(item.id==='connection'){return isOnline?/*#__PURE__*/_jsx(Chip,{label:\"Online\",color:\"success\",size:\"small\"}):/*#__PURE__*/_jsx(Chip,{label:\"Offline\",color:\"warning\",size:\"small\"});}if(item.id==='notifications'){const color=notificationPermission==='granted'?'success':notificationPermission==='denied'?'error':'default';return/*#__PURE__*/_jsx(Chip,{label:notificationPermission==='granted'?'Ativadas':notificationPermission==='denied'?'Bloqueadas':'Pendente',color:color,size:\"small\"});}return null;};const isDisabled=()=>{if(item.id==='install'&&isInstalled)return true;if(item.id==='notifications'&&notificationPermission==='denied')return true;return false;};return/*#__PURE__*/_jsxs(ListItem,{disabled:isDisabled(),children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Badge,{badgeContent:item.id==='update'&&cacheStatus==='updated'?'!':0,color:\"error\",children:item.icon})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[item.label,getStatusChip()]}),secondary:item.description}),/*#__PURE__*/_jsxs(ListItemSecondaryAction,{children:[item.type==='switch'&&/*#__PURE__*/_jsx(Switch,{checked:item.value,onChange:e=>handleSettingChange(item.id,e.target.checked),disabled:isDisabled()}),item.type==='select'&&/*#__PURE__*/_jsx(FormControl,{size:\"small\",sx:{minWidth:120},children:/*#__PURE__*/_jsx(Select,{value:item.value,onChange:e=>handleSettingChange(item.id,e.target.value),variant:\"outlined\",children:(_item$options=item.options)===null||_item$options===void 0?void 0:_item$options.map(option=>/*#__PURE__*/_jsx(MenuItem,{value:option.value,children:option.label},option.value))})}),item.type==='action'&&item.action&&/*#__PURE__*/_jsx(IconButton,{onClick:item.action,disabled:isDisabled()||item.id==='update'&&isUpdating,children:item.id==='update'&&isUpdating?/*#__PURE__*/_jsx(SyncIcon,{}):item.icon})]})]},item.id);};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{py:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"\\u2699\\uFE0F Configura\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,mb:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'primary.main'},children:\"\\uD83D\\uDCF1\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Status PWA\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:isInstalled?'App instalado e funcionando':'App executando no navegador'})]})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:1,flexWrap:\"wrap\",children:[/*#__PURE__*/_jsx(Chip,{label:\"Service Worker: \".concat(isSupported.serviceWorker?'Suportado':'Não suportado'),color:isSupported.serviceWorker?'success':'error',size:\"small\"}),/*#__PURE__*/_jsx(Chip,{label:\"Notifica\\xE7\\xF5es: \".concat(isSupported.notifications?'Suportado':'Não suportado'),color:isSupported.notifications?'success':'error',size:\"small\"}),/*#__PURE__*/_jsx(Chip,{label:\"Compartilhamento: \".concat(isSupported.share?'Suportado':'Não suportado'),color:isSupported.share?'success':'error',size:\"small\"})]})]})}),isUpdating&&/*#__PURE__*/_jsxs(Box,{sx:{mb:2},children:[/*#__PURE__*/_jsx(LinearProgress,{}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{mt:1},children:\"Verificando atualiza\\xE7\\xF5es...\"})]}),settingsSections.map((section,index)=>/*#__PURE__*/_jsx(Card,{sx:{mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:section.title}),/*#__PURE__*/_jsx(List,{children:section.items.map((item,itemIndex)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[renderSettingItem(item),itemIndex<section.items.length-1&&/*#__PURE__*/_jsx(Divider,{})]},item.id))})]})},section.title)),/*#__PURE__*/_jsxs(Dialog,{open:clearCacheDialog,onClose:()=>setClearCacheDialog(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"\\uD83D\\uDDD1\\uFE0F Limpar Cache\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mb:2},children:\"Esta a\\xE7\\xE3o ir\\xE1 remover todos os dados armazenados localmente e recarregar o aplicativo.\"}),/*#__PURE__*/_jsxs(Typography,{children:[\"Cache atual: \",/*#__PURE__*/_jsx(\"strong\",{children:cacheSize})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:1},children:\"Ap\\xF3s limpar o cache, ser\\xE1 necess\\xE1rio baixar novamente os dados quando estiver online.\"})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setClearCacheDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClearCache,color:\"error\",startIcon:/*#__PURE__*/_jsx(DeleteIcon,{}),children:\"Limpar Cache\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:aboutDialog,onClose:()=>setAboutDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"\\uD83D\\uDCF1 Sobre o LETZ\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",py:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:80,height:80,mx:'auto',mb:2,bgcolor:'primary.main',fontSize:'2rem'},children:\"\\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"LETZ\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:\"Organizador de Eventos Sociais\"}),/*#__PURE__*/_jsxs(Box,{mt:3,mb:2,children:[/*#__PURE__*/_jsx(Chip,{label:\"Vers\\xE3o 1.0.0\",variant:\"outlined\",sx:{mr:1}}),/*#__PURE__*/_jsx(Chip,{label:\"PWA\",color:\"primary\",sx:{mr:1}}),/*#__PURE__*/_jsx(Chip,{label:\"React 18\",color:\"secondary\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",paragraph:true,children:\"Conecte-se com amigos e organize eventos incr\\xEDveis! O LETZ \\xE9 seu companheiro para churrascos, festas e encontros inesquec\\xEDveis.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Desenvolvido com \\u2764\\uFE0F para trazer pessoas juntas\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setAboutDialog(false),children:\"Fechar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleShareApp,variant:\"contained\",startIcon:/*#__PURE__*/_jsx(ShareIcon,{}),children:\"Compartilhar\"})]})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}