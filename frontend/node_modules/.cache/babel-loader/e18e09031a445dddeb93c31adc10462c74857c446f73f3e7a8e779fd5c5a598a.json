{"ast":null,"code":"import _objectSpread from\"/Users/mdearaujo/Downloads/LETZ/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/Users/mdearaujo/Downloads/LETZ/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"value\",\"index\"];import React,{useState,useEffect}from'react';import{Box,Container,Typography,Paper,List,ListItem,ListItemText,ListItemAvatar,ListItemSecondaryAction,Avatar,Button,IconButton,Chip,Divider,Alert,CircularProgress,Tabs,Tab,Badge}from'@mui/material';import{Notifications as NotificationsIcon,Event as EventIcon,Person as PersonIcon,Message as MessageIcon,Check as CheckIcon,Close as CloseIcon,Delete as DeleteIcon,MarkEmailRead as MarkReadIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index}=props,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"notifications-tabpanel-\".concat(index),\"aria-labelledby\":\"notifications-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{py:3},children:children})}));}function NotificationsPage(){const[notifications,setNotifications]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[tabValue,setTabValue]=useState(0);useEffect(()=>{loadNotifications();},[]);const loadNotifications=async()=>{try{setIsLoading(true);// Aqui você faria a chamada para a API de notificações\n// Por enquanto, vamos usar dados mockados\nconst mockNotifications=[{id:1,type:'EVENT_INVITE',title:'Convite para evento',message:'João Silva te convidou para \"Churrasco de Final de Semana\"',isRead:false,createdAt:'2024-01-15T10:30:00Z',data:{eventId:1,userId:2}},{id:2,type:'FRIEND_REQUEST',title:'Solicitação de amizade',message:'Maria Santos enviou uma solicitação de amizade',isRead:false,createdAt:'2024-01-14T15:45:00Z',data:{userId:3,friendshipId:5}},{id:3,type:'EVENT_UPDATE',title:'Evento atualizado',message:'O evento \"Festa de Aniversário\" foi atualizado',isRead:true,createdAt:'2024-01-13T09:15:00Z',data:{eventId:2}},{id:4,type:'MESSAGE',title:'Nova mensagem',message:'Pedro Costa enviou uma mensagem',isRead:false,createdAt:'2024-01-12T18:20:00Z',data:{userId:4,messageId:10}},{id:5,type:'SYSTEM',title:'Nova conquista!',message:'Você ganhou o badge \"Organizador\" por criar seu primeiro evento!',isRead:true,createdAt:'2024-01-11T12:00:00Z'}];setNotifications(mockNotifications);}catch(error){console.error('Erro ao carregar notificações:',error);setError('Erro ao carregar notificações');}finally{setIsLoading(false);}};const handleMarkAsRead=notificationId=>{setNotifications(prev=>prev.map(notification=>notification.id===notificationId?_objectSpread(_objectSpread({},notification),{},{isRead:true}):notification));};const handleMarkAllAsRead=()=>{setNotifications(prev=>prev.map(notification=>_objectSpread(_objectSpread({},notification),{},{isRead:true})));};const handleDeleteNotification=notificationId=>{setNotifications(prev=>prev.filter(notification=>notification.id!==notificationId));};const handleAcceptInvite=(notificationId,eventId)=>{// Aqui você faria a chamada para aceitar o convite\nconsole.log('Aceitar convite para evento:',eventId);handleMarkAsRead(notificationId);};const handleDeclineInvite=(notificationId,eventId)=>{// Aqui você faria a chamada para recusar o convite\nconsole.log('Recusar convite para evento:',eventId);handleDeleteNotification(notificationId);};const handleAcceptFriendRequest=(notificationId,friendshipId)=>{// Aqui você faria a chamada para aceitar a solicitação de amizade\nconsole.log('Aceitar solicitação de amizade:',friendshipId);handleDeleteNotification(notificationId);};const handleDeclineFriendRequest=(notificationId,friendshipId)=>{// Aqui você faria a chamada para recusar a solicitação de amizade\nconsole.log('Recusar solicitação de amizade:',friendshipId);handleDeleteNotification(notificationId);};const getNotificationIcon=type=>{switch(type){case'EVENT_INVITE':case'EVENT_UPDATE':return/*#__PURE__*/_jsx(EventIcon,{});case'FRIEND_REQUEST':return/*#__PURE__*/_jsx(PersonIcon,{});case'MESSAGE':return/*#__PURE__*/_jsx(MessageIcon,{});default:return/*#__PURE__*/_jsx(NotificationsIcon,{});}};const getNotificationColor=type=>{switch(type){case'EVENT_INVITE':return'primary';case'FRIEND_REQUEST':return'success';case'EVENT_UPDATE':return'info';case'MESSAGE':return'warning';case'SYSTEM':return'secondary';default:return'default';}};const renderNotificationActions=notification=>{var _notification$data,_notification$data2;const actions=[];if(notification.type==='EVENT_INVITE'&&(_notification$data=notification.data)!==null&&_notification$data!==void 0&&_notification$data.eventId){actions.push(/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"success\",onClick:()=>handleAcceptInvite(notification.id,notification.data.eventId),children:\"Aceitar\"},\"accept\"),/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"error\",onClick:()=>handleDeclineInvite(notification.id,notification.data.eventId),children:\"Recusar\"},\"decline\"));}if(notification.type==='FRIEND_REQUEST'&&(_notification$data2=notification.data)!==null&&_notification$data2!==void 0&&_notification$data2.friendshipId){actions.push(/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"success\",onClick:()=>handleAcceptFriendRequest(notification.id,notification.data.friendshipId),children:/*#__PURE__*/_jsx(CheckIcon,{})},\"accept-friend\"),/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>handleDeclineFriendRequest(notification.id,notification.data.friendshipId),children:/*#__PURE__*/_jsx(CloseIcon,{})},\"decline-friend\"));}if(!notification.isRead){actions.push(/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleMarkAsRead(notification.id),children:/*#__PURE__*/_jsx(MarkReadIcon,{})},\"mark-read\"));}actions.push(/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>handleDeleteNotification(notification.id),children:/*#__PURE__*/_jsx(DeleteIcon,{})},\"delete\"));return actions;};const unreadNotifications=notifications.filter(n=>!n.isRead);const readNotifications=notifications.filter(n=>n.isRead);if(isLoading){return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",sx:{py:4,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{py:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:\"\\uD83D\\uDD14 Notifica\\xE7\\xF5es\"}),unreadNotifications.length>0&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:handleMarkAllAsRead,children:\"Marcar todas como lidas\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),/*#__PURE__*/_jsxs(Paper,{elevation:3,children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider'},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:(e,newValue)=>setTabValue(newValue),children:[/*#__PURE__*/_jsx(Tab,{label:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[\"N\\xE3o lidas\",unreadNotifications.length>0&&/*#__PURE__*/_jsx(Badge,{badgeContent:unreadNotifications.length,color:\"error\"})]})}),/*#__PURE__*/_jsx(Tab,{label:\"Lidas (\".concat(readNotifications.length,\")\")}),/*#__PURE__*/_jsx(Tab,{label:\"Todas (\".concat(notifications.length,\")\")})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsxs(List,{children:[unreadNotifications.map((notification,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{sx:{bgcolor:'action.hover',borderLeft:3,borderColor:\"\".concat(getNotificationColor(notification.type),\".main\")},children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{color:getNotificationColor(notification.type),children:getNotificationIcon(notification.type)})}),/*#__PURE__*/_jsx(ListItemText,{primary:notification.title,secondary:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:notification.message}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(notification.createdAt).toLocaleString('pt-BR')})]})}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1},children:renderNotificationActions(notification)})})]}),index<unreadNotifications.length-1&&/*#__PURE__*/_jsx(Divider,{})]},notification.id)),unreadNotifications.length===0&&/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Nenhuma notifica\\xE7\\xE3o n\\xE3o lida\",secondary:\"Voc\\xEA est\\xE1 em dia com suas notifica\\xE7\\xF5es!\"})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:/*#__PURE__*/_jsxs(List,{children:[readNotifications.map((notification,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{color:getNotificationColor(notification.type),children:getNotificationIcon(notification.type)})}),/*#__PURE__*/_jsx(ListItemText,{primary:notification.title,secondary:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:notification.message}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(notification.createdAt).toLocaleString('pt-BR')})]})}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>handleDeleteNotification(notification.id),children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]}),index<readNotifications.length-1&&/*#__PURE__*/_jsx(Divider,{})]},notification.id)),readNotifications.length===0&&/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Nenhuma notifica\\xE7\\xE3o lida\",secondary:\"As notifica\\xE7\\xF5es lidas aparecer\\xE3o aqui\"})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:2,children:/*#__PURE__*/_jsx(List,{children:notifications.map((notification,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{sx:{bgcolor:notification.isRead?'transparent':'action.hover',borderLeft:notification.isRead?0:3,borderColor:\"\".concat(getNotificationColor(notification.type),\".main\")},children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{color:getNotificationColor(notification.type),children:getNotificationIcon(notification.type)})}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:notification.title}),!notification.isRead&&/*#__PURE__*/_jsx(Chip,{label:\"Nova\",size:\"small\",color:\"error\"})]}),secondary:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:notification.message}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(notification.createdAt).toLocaleString('pt-BR')})]})}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:1},children:renderNotificationActions(notification)})})]}),index<notifications.length-1&&/*#__PURE__*/_jsx(Divider,{})]},notification.id))})})]})]});}export default NotificationsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}