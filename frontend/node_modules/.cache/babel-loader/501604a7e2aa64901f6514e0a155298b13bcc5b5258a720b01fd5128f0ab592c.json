{"ast":null,"code":"import _objectSpread from\"/Users/mdearaujo/Downloads/LETZ/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Box,Container,Typography,Paper,Avatar,Button,Grid,Card,CardContent,Chip,List,ListItem,ListItemText,ListItemIcon,TextField,Dialog,DialogTitle,DialogContent,DialogActions,Alert,CircularProgress}from'@mui/material';import{Edit as EditIcon,Email as EmailIcon,Phone as PhoneIcon,CalendarToday as CalendarIcon,EmojiEvents as TrophyIcon,Group as GroupIcon,Event as EventIcon,Star as StarIcon,Person as PersonIcon}from'@mui/icons-material';import{useAppSelector}from'../hooks/redux';import{userAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProfilePage(){const{user}=useAppSelector(state=>state.auth);const[editDialogOpen,setEditDialogOpen]=useState(false);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[stats,setStats]=useState(null);const[editForm,setEditForm]=useState({firstName:(user===null||user===void 0?void 0:user.firstName)||'',lastName:(user===null||user===void 0?void 0:user.lastName)||'',email:(user===null||user===void 0?void 0:user.email)||'',phoneNumber:(user===null||user===void 0?void 0:user.phoneNumber)||'',bio:(user===null||user===void 0?void 0:user.bio)||''});useEffect(()=>{loadUserStats();},[]);const loadUserStats=async()=>{try{setIsLoading(true);// Aqui vocÃª faria chamadas para buscar estatÃ­sticas do usuÃ¡rio\n// Por enquanto, vamos usar dados mockados\nsetStats({eventsCreated:12,eventsAttended:28,friendsCount:45,totalPoints:(user===null||user===void 0?void 0:user.points)||0,badges:[{id:1,name:'Organizador',description:'Criou seu primeiro evento',icon:'ðŸŽ¯',color:'primary',earnedAt:'2024-01-15'},{id:2,name:'Social',description:'Tem mais de 20 amigos',icon:'ðŸ‘¥',color:'success',earnedAt:'2024-02-10'},{id:3,name:'Participante Ativo',description:'Participou de 25+ eventos',icon:'ðŸŽª',color:'warning',earnedAt:'2024-03-05'}]});}catch(error){console.error('Erro ao carregar estatÃ­sticas:',error);setError('Erro ao carregar estatÃ­sticas do usuÃ¡rio');}finally{setIsLoading(false);}};const handleEditProfile=async()=>{try{setIsLoading(true);setError(null);await userAPI.updateProfile(editForm);// Aqui vocÃª atualizaria o estado global do usuÃ¡rio\nsetEditDialogOpen(false);// Mostrar mensagem de sucesso\nsetError(null);}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erro ao atualizar perfil');}finally{setIsLoading(false);}};const handleInputChange=(field,value)=>{setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));};const getBadgeColor=color=>{switch(color){case'primary':return'primary';case'success':return'success';case'warning':return'warning';case'error':return'error';default:return'default';}};if(isLoading&&!stats){return/*#__PURE__*/_jsx(Container,{maxWidth:\"md\",sx:{py:4,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",sx:{py:4},children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),/*#__PURE__*/_jsx(Paper,{elevation:3,sx:{p:4,mb:4},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:3},children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:120,height:120},src:user===null||user===void 0?void 0:user.profilePicture,children:/*#__PURE__*/_jsx(PersonIcon,{sx:{fontSize:60}})}),/*#__PURE__*/_jsxs(Box,{sx:{flex:1},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",gutterBottom:true,children:[user===null||user===void 0?void 0:user.firstName,\" \",user===null||user===void 0?void 0:user.lastName]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"text.secondary\",gutterBottom:true,children:[\"@\",user===null||user===void 0?void 0:user.username]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{mb:2},children:(user===null||user===void 0?void 0:user.bio)||'Nenhuma biografia adicionada ainda.'}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2,alignItems:'center'},children:[/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(StarIcon,{}),label:\"\".concat((stats===null||stats===void 0?void 0:stats.totalPoints)||0,\" pontos\"),color:\"primary\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),onClick:()=>setEditDialogOpen(true),children:\"Editar Perfil\"})]})]})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{elevation:2,children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCCA Estat\\xEDsticas\"}),/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(EventIcon,{color:\"primary\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Eventos Criados\",secondary:(stats===null||stats===void 0?void 0:stats.eventsCreated)||0})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(TrophyIcon,{color:\"success\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Eventos Participados\",secondary:(stats===null||stats===void 0?void 0:stats.eventsAttended)||0})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(GroupIcon,{color:\"info\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Amigos\",secondary:(stats===null||stats===void 0?void 0:stats.friendsCount)||0})]})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{elevation:2,children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83C\\uDFC6 Conquistas\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexWrap:'wrap',gap:1},children:[stats===null||stats===void 0?void 0:stats.badges.map(badge=>/*#__PURE__*/_jsx(Chip,{label:\"\".concat(badge.icon,\" \").concat(badge.name),color:getBadgeColor(badge.color),variant:\"outlined\",title:badge.description},badge.id)),(!(stats!==null&&stats!==void 0&&stats.badges)||stats.badges.length===0)&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Nenhuma conquista ainda. Continue participando de eventos!\"})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{elevation:2,children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\uD83D\\uDCDE Informa\\xE7\\xF5es de Contato\"}),/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(EmailIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Email\",secondary:user===null||user===void 0?void 0:user.email})]}),(user===null||user===void 0?void 0:user.phoneNumber)&&/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(PhoneIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Telefone\",secondary:user.phoneNumber})]}),(user===null||user===void 0?void 0:user.birthDate)&&/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(CalendarIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Data de Nascimento\",secondary:new Date(user.birthDate).toLocaleDateString('pt-BR')})]})]})]})})})]}),/*#__PURE__*/_jsxs(Dialog,{open:editDialogOpen,onClose:()=>setEditDialogOpen(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Editar Perfil\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',gap:2,pt:1},children:[/*#__PURE__*/_jsx(TextField,{label:\"Nome\",value:editForm.firstName,onChange:e=>handleInputChange('firstName',e.target.value),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Sobrenome\",value:editForm.lastName,onChange:e=>handleInputChange('lastName',e.target.value),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",type:\"email\",value:editForm.email,onChange:e=>handleInputChange('email',e.target.value),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Telefone\",value:editForm.phoneNumber,onChange:e=>handleInputChange('phoneNumber',e.target.value),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Biografia\",multiline:true,rows:3,value:editForm.bio,onChange:e=>handleInputChange('bio',e.target.value),fullWidth:true,placeholder:\"Conte um pouco sobre voc\\xEA...\"})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setEditDialogOpen(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{onClick:handleEditProfile,variant:\"contained\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):'Salvar'})]})]})]});}export default ProfilePage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}