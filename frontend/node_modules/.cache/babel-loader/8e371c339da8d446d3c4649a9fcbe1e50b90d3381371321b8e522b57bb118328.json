{"ast":null,"code":"import _objectSpread from\"/Users/mdearaujo/Downloads/LETZ/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/Users/mdearaujo/Downloads/LETZ/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"value\",\"index\"];import React,{useEffect,useState}from'react';import{Container,Grid,Card,CardContent,Typography,Box,Chip,Avatar,Button,Tabs,Tab,Fab,CardActions}from'@mui/material';import{Add as AddIcon,Event as EventIcon,LocationOn as LocationIcon,Person as PersonIcon,Schedule as ScheduleIcon}from'@mui/icons-material';import{useNavigate}from'react-router-dom';import{useAppDispatch,useAppSelector}from'../hooks/redux';import{fetchMyEvents,fetchParticipatingEvents,fetchUpcomingEvents}from'../store/slices/eventSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index}=props,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"events-tabpanel-\".concat(index),\"aria-labelledby\":\"events-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})}));}const EventsPage=()=>{const navigate=useNavigate();const dispatch=useAppDispatch();const{myEvents,participatingEvents,upcomingEvents,isLoading}=useAppSelector(state=>state.events);const[tabValue,setTabValue]=useState(0);useEffect(()=>{dispatch(fetchMyEvents());dispatch(fetchParticipatingEvents());dispatch(fetchUpcomingEvents());},[dispatch]);const handleTabChange=(event,newValue)=>{setTabValue(newValue);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('pt-BR',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});};const getEventTypeColor=type=>{const colors={CHURRASCO:'success',FESTA:'primary',JANTAR:'secondary',REUNIAO:'info',ANIVERSARIO:'warning'};return colors[type]||'default';};const getEventTypeLabel=type=>{const labels={CHURRASCO:'Churrasco',FESTA:'Festa',JANTAR:'Jantar',REUNIAO:'Reunião',ANIVERSARIO:'Aniversário'};return labels[type]||type;};const EventCard=_ref=>{var _event$organizer,_event$organizer2,_event$organizer2$fir,_event$organizer3,_event$organizer4;let{event}=_ref;return/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h2\",gutterBottom:true,children:event.title}),/*#__PURE__*/_jsx(Chip,{label:getEventTypeLabel(event.type),size:\"small\",color:getEventTypeColor(event.type)})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:2},children:event.description||'Sem descrição'}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(ScheduleIcon,{sx:{mr:1,fontSize:16,color:'text.secondary'}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:formatDate(event.startDateTime)})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(LocationIcon,{sx:{mr:1,fontSize:16,color:'text.secondary'}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:event.location})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(PersonIcon,{sx:{mr:1,fontSize:16,color:'text.secondary'}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[event.totalParticipants,\" participante\",event.totalParticipants!==1?'s':'',event.maxParticipants&&\" / \".concat(event.maxParticipants)]})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Avatar,{src:(_event$organizer=event.organizer)===null||_event$organizer===void 0?void 0:_event$organizer.profilePicture,sx:{width:24,height:24},children:(_event$organizer2=event.organizer)===null||_event$organizer2===void 0?void 0:(_event$organizer2$fir=_event$organizer2.firstName)===null||_event$organizer2$fir===void 0?void 0:_event$organizer2$fir[0]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",children:[\"Organizado por \",(_event$organizer3=event.organizer)===null||_event$organizer3===void 0?void 0:_event$organizer3.firstName,\" \",(_event$organizer4=event.organizer)===null||_event$organizer4===void 0?void 0:_event$organizer4.lastName]})]})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(\"/events/\".concat(event.id)),children:\"Ver Detalhes\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"primary\",children:\"Participar\"})]})]});};const EmptyState=_ref2=>{let{message}=_ref2;return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',py:8,textAlign:'center'},children:[/*#__PURE__*/_jsx(EventIcon,{sx:{fontSize:64,color:'text.secondary',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",gutterBottom:true,children:message}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>navigate('/events/create'),sx:{mt:2},children:\"Criar Primeiro Evento\"})]});};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:\"Meus Eventos\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>navigate('/events/create'),children:\"Criar Evento\"})]}),/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:'divider',mb:3},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"Abas de eventos\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Meus Eventos (\".concat(myEvents.length,\")\")}),/*#__PURE__*/_jsx(Tab,{label:\"Participando (\".concat(participatingEvents.length,\")\")}),/*#__PURE__*/_jsx(Tab,{label:\"Pr\\xF3ximos (\".concat(upcomingEvents.length,\")\")})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:isLoading?/*#__PURE__*/_jsx(Typography,{children:\"Carregando...\"}):myEvents.length===0?/*#__PURE__*/_jsx(EmptyState,{message:\"Voc\\xEA ainda n\\xE3o criou nenhum evento\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:myEvents.map(event=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsx(EventCard,{event:event})},event.id))})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:isLoading?/*#__PURE__*/_jsx(Typography,{children:\"Carregando...\"}):participatingEvents.length===0?/*#__PURE__*/_jsx(EmptyState,{message:\"Voc\\xEA n\\xE3o est\\xE1 participando de nenhum evento ainda\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:participatingEvents.map(event=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsx(EventCard,{event:event})},event.id))})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:2,children:isLoading?/*#__PURE__*/_jsx(Typography,{children:\"Carregando...\"}):upcomingEvents.length===0?/*#__PURE__*/_jsx(EmptyState,{message:\"Nenhum evento pr\\xF3ximo encontrado\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:upcomingEvents.map(event=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsx(EventCard,{event:event})},event.id))})}),/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"Criar evento\",sx:{position:'fixed',bottom:16,right:16},onClick:()=>navigate('/events/create'),children:/*#__PURE__*/_jsx(AddIcon,{})})]});};export default EventsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}